import"./modulepreload-polyfill-B5Qt9EMX.js";const f="AZOXK4TOE2EK",g=document.getElementById("errorContainer"),E=document.getElementById("errorMessageText"),w=document.getElementById("closeErrorBtn"),u=document.getElementById("loadingIndicator"),i=document.getElementById("searchBtn");w.addEventListener("click",()=>{g.style.display="none"});function r(e){E.textContent=e,g.style.display="block"}function h(){u.style.display="block",i.disabled=!0,i.textContent="Загрузка..."}function I(){u.style.display="none",i.disabled=!1,i.textContent="Показать время"}function d(e,t={},n=15e3){return Promise.race([fetch(e,t),new Promise((m,a)=>setTimeout(()=>a(new Error("Превышено время ожидания запроса (15 секунд).")),n))])}document.getElementById("searchBtn").addEventListener("click",T);async function T(){const e=document.getElementById("cityInput").value.trim();if(!e){r("Пожалуйста, введите название города.");return}h();try{await new Promise(p=>setTimeout(p,1e3));const t=await d(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&format=json&limit=1`);if(!t.ok)throw new Error(`Ошибка при геокодировании: ${t.status} ${t.statusText}`);const n=await t.json();if(!n||n.length===0)throw new Error("Город не найден.");const m=n[0].lat,a=n[0].lon,s=await d(`https://api.timezonedb.com/v2.1/get-time-zone?key=${f}&format=json&by=position&lat=${m}&lng=${a}`);if(!s.ok)throw new Error(`Ошибка при получении данных о часовом поясе: ${s.status} ${s.statusText}`);const o=await s.json();if(!o.timestamp)throw new Error("Сервер вернул некорректные данные о часовом поясе.");const y=new Date(o.timestamp*1e3).toLocaleString("ru-RU");let c=o.countryName||"неизвестная страна";c=c.replace(/\s*\([^)]+\)/g,"").trim(),document.getElementById("currentTime").textContent=`Текущее время в ${e} (${c}): ${y}`;const l=document.getElementById("timeInfo");l.innerHTML=`
            <p><strong>Часовой пояс:</strong> ${o.zoneName||"неизвестный"}</p>
            <p><strong>Разница с UTC:</strong> ${o.gmtOffset/3600} часов</p>
            <p><strong>Сокращение:</strong> ${o.abbreviation||"неизвестно"}</p>
        `,l.style.display="block"}catch(t){console.error("Ошибка:",t),t.message.includes("таймаут")?r(t.message):t.message.includes("некорректные данные")?r("Сервер вернул некорректные данные о часовом поясе."):r(t.message)}finally{I()}}
